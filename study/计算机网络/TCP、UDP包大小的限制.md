# UDP的报文长度

## UDP包大小限制
大概是2的16次方不到

因为UDP包头部里有两个字节来控制报文长度。2字节的话就是16位。65535.
然后还要减去头部占用的8字节。ip层也要占用20字节。

## UDP包长度多少合适
在链路层，每一帧是1500字节，也就是MTU
然后在网络层，IP包的数据包头部是20字节，那么对于IP数据报来说 数据部分就是1480字节
在传输层，对于UDP包来说头部是8字节，所以就是1480 - 8 = 1472字节

当我们的UDP包发送长度大于1472字节的时候，那么IP层就会采用分段的形式来分割数据包。
而对方的IP层则又会重组这个数据包到UDP层上，因为UDP不可靠，所以重组失败的话 UDP就没了。
所以UDP如果能每次刚好达到MTU 也就是1472字节的话就最好了，这样就不用分段了。
而在网络上很多路由器默认的MTU都会比较小，好像是500多，所以如果设置成这个值的话就会比较保险

# TCP的报文长度
对于TCP来说，最大长度有MSS来决定。这个MSS代表了TCP每次能传输的报文长度。
而它往往不是一个固定值，而是通过双方协商的。
MSS是传输层的，在建立TCP连接时，双方都有提供自己的MSS，然后取两者中较小的
MTU是数据链路层的概念。
如果默认的话就是由MTU来代替，而TCP包的头部是20字节，IP层也要20字节，所以长度就是1500-20-20 = 1460字节

